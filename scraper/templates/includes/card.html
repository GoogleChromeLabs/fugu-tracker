{% from './pill.html' import pills %} {% macro card(api, type) %}
<li class="card" data-title="{{api.title}}" data-shipping="{{api.shipping | dump}}" data-type="{{type}}">
  <div class="card--header">
    <h2 class="card--title">{{api.title}}</h2>
    {% if api.shipping %} {{pills(api.shipping, type)}} {% endif %} {% if api.where %}
    <div class="card--available">
      {% for location in api.where %}
      <img class="card--location" src="/images/{{location | lower }}.svg" alt="{{location}}" />
      {% endfor %}
    </div>
    {% endif %}
  </div>
  <div class="card--body">
    {%if api.summary %}
    <p class="card--summary">{{api.summary}}</p>
    {% endif %}
    <details class="card--body">
      <summary class="card--more">More info</summary>
      {% if api.feature %}
      <table class="card--table">
        <caption>
          Consensus & Standardization
        </caption>
        <thead>
          <tr>
            <th>Browser</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody>
          {% for browser, items in api.feature.browsers | dictsort %} {% if browser != 'chrome' %} {% set b = browser %} {% if b == 'ff' %} {% set b = 'firefox' %} {% elseif b == 'webdev' %} {% set b = 'developers' %} {% endif %}
          <tr>
            <td>{{b | title}}</td>
            <td>{{items.view.text | title}}</td>
          </tr>
          {% endif %} {% endfor %}
        </tbody>
      </table>
      {% endif %}

      <table class="card--table">
        <caption>
          Implementation Information
        </caption>
        {% if api.who %}
        <tr>
          <td>Implementor</td>
          <td>{{api.who}}</td>
        </tr>
        {% endif %}
        <tr>
          <td>Tracking Bug</td>
          <td>
            <a href="https://bugs.chromium.org/p/chromium/issues/detail?id={{api.id}}">{{api.id}}</a>
          </td>
        </tr>
        {% if api.feature %}
        <tr>
          <td>Chrome Status</td>
          <td><a class="card--chrome-status" href="https://chromestatus.com/feature/{{api.feature.id}}">Details</a></td>
        </tr>
        {% endif %}
        <tr>
          <td>Stars</td>
          <td>{{api.stars}}</td>
        </tr>
      </table>
    </details>
  </div>
</li>
{% endmacro %}
